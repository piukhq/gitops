---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: prometheus-pusher
  namespace: monitoring
  labels:
    app: prometheus-pusher
spec:
  replicas: 1
  selector:
    matchLabels:
      app: prometheus-pusher
  template:
    metadata:
      labels:
        app: prometheus-pusher
    spec:
      serviceAccountName: prometheus-pusher
      containers:
        - name: prometheus-pusher
          image: binkcore.azurecr.io/prometheus-pusher-client:2022-05-06T183938Z
          imagePullPolicy: Always
          env:
            - name: PROMETHEUS_TOKEN
              value: 0e534007-221e-4394-adb4-9ccc02550686
            - name: PROMETHEUS_KEY
              value: ${cluster_name}
            - name: PROMETHEUS_URL
              value: https://tools.uksouth.bink.sh/prometheus-creds
      imagePullSecrets:
        - name: binkcore.azurecr.io
