---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: metis
spec:
  template:
    spec:
      containers:
        - name: app
          env:
            - name: HERMES_URL
              value: http://hermes-api
            - name: DEBUG
              value: 'True'
            - name: METIS_TESTING
              value: 'True'
            - name: METIS_PRE_PRODUCTION
              value: 'False'
            - name: SPREEDLY_SIGNING_SECRET
            - name: SPREEDLY_BASE_URL
              value: http://pelops-api/spreedly
            - name: STUBBED_VOP_URL
              value: http://pelops-api
            - name: REDIS_HOST
              value: redis
            - name: REDIS_PORT
              value: '6379'
            - name: PONTUS_DATABASE_URI
              valueFrom:
                secretKeyRef:
                  name: azure-pgfs
                  key: common_oat_barclays_pontus
            - name: RABBITMQ_HOST
              value: rabbitmq
            - name: RABBITMQ_USER
              value: guest
            - name: RABBITMQ_PASS
              value: guest
            - name: SENTRY_DSN
              value: https://9aeb0741cef34c4ebce7e560c56cac2c@o503751.ingest.sentry.io/5610024
            - name: SENTRY_ENV
              value: oat
