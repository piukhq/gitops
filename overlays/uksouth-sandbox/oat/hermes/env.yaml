---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hermes
spec:
  template:
    spec:
      containers:
        - name: app
          env:
            - name: HERMES_BLOB_STORAGE_DSN
              valueFrom:
                secretKeyRef:
                  key: connection_string
                  name: azure-storage-oat
            - name: HERMES_DATABASE_URL
              valueFrom:
                secretKeyRef:
                  name: azure-pgfs
                  key: common_hermes
            - name: HERMES_BLOB_STORAGE_CONTAINER
              value: media/hermes
            - name: HERMES_CUSTOM_DOMAIN
              value: https://oat.sandbox.gb.bink.com
            - name: NO_AZURE_STORAGE
              value: 'False'
            - name: ENVIRONMENT_NAME
              value: OAT Sandbox Environment
            - name: ENVIRONMENT_COLOR
              value: '#FAC40F'
            - name: MIDAS_URL
              value: http://midas-api
            - name: LETHE_URL
              value: https://oat.sandbox.gb.bink.com/password
            - name: METIS_URL
              value: http://metis-api
            - name: HADES_URL
              value: http://hades-api
            - name: HERMES_SENTRY_DSN
              value: https://40ec46dd6a8940c4882501427e3e3a66@o503751.ingest.sentry.io/5589266
            - name: HERMES_SENTRY_ENV
              value: oat
            - name: HERMES_DEBUG
              value: 'False'
            - name: REDIS_HOST
              value: redis
            - name: REDIS_PORT
              value: '6379'
            - name: CELERY_BROKER_URL
              value: pyamqp://guest:guest@rabbitmq/
            - name: ATLAS_URL
              value: http://atlas-api
            - name: VAULT_URL
              value: https://bink-uksouth-sandbox-oat.vault.azure.net/
            - name: SPREEDLY_BASE_URL
              value: http://pelops-api/spreedly
            - name: DEFAULT_API_VERSION
              value: '1.1'
            - name: SECURE_COOKIES
              value: 'True'
            - name: THREAD_POOL_EXECUTOR_MAX_WORKERS
              value: '5'
            - name: OIDC_RP_REPLY_URL
              value: https://oat.sandbox.gb.bink.com/admin/oidc/callback/
            - name: OIDC_CLIENT_ID
              value: 1a5d83f3-da1f-401c-ac5f-d41c3fa0d9ef
            - name: OIDC_CLIENT_SECRET
              value: -NGSjpWWx_1w-6~.NkIl3lf~DC3Rg-.CMz
