apiVersion: apps/v1
kind: Deployment
metadata:
  name: metis
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: HERMES_URL
          value: http://hermes-api
        - name: DEBUG
          value: 'True'
        - name: METIS_TESTING
          value: 'True'
        - name: METIS_PRE_PRODUCTION
          value: 'False'
        - name: AZURE_VAULT_URL
          value: http://fakicorp:8200
        - name: SPREEDLY_SIGNING_SECRET
        - name: SPREEDLY_BASE_URL
          value: http://pelops/spreedly
        - name: STUBBED_VOP_URL
          value: http://pelops
        - name: REDIS_HOST
          valueFrom:
            secretKeyRef:
              key: host
              name: azure-redis-common
        - name: REDIS_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: azure-redis-common
        - name: REDIS_PASS
          valueFrom:
            secretKeyRef:
              key: password
              name: azure-redis-common
        - name: PONTUS_DATABASE
          value: pontus
        - name: PONTUS_USER
          valueFrom:
            secretKeyRef:
              key: admin_user
              name: azure-pg-common
        - name: PONTUS_HOST
          value: 127.0.0.1
        - name: PONTUS_PORT
          value: '5432'
        - name: SENTRY_DSN
          value: https://9aeb0741cef34c4ebce7e560c56cac2c@o503751.ingest.sentry.io/5610024
        - name: SENTRY_ENV
          value: staging
        - name: RABBITMQ_HOST
          value: rabbitmq
        - name: RABBITMQ_USER
          value: guest
        - name: RABBITMQ_PASS
          value: guest
