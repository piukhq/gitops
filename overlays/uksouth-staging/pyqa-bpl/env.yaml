apiVersion: apps/v1
kind: Deployment
metadata:
  name: pyqa-bpl
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: ALERT_ON_SUCCESS
          value: "True"
        - name: ALERT_ON_FAILURE
          value: "True"
        - name: BLOB_STORAGE_DSN
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        - name: COMMAND
          value: pytest -m bpl
        - name: ENV_BASE_URL
          value: https://api.staging.gb.bink.com
        - name: POLARIS_URL
          value: http://polaris-api
        - name: MOCK_SERVICE_BASE_URL
          value: http://luna-api
        - name: REPORT_CONTAINER
          value: qareports
        - name: REPORT_DIRECTORY
          value: bpl/isolated/
        - name: SCHEDULE
          value: 00 22 * * *
        - name: SQLALCHEMY_DATABASE_URI
          value: postgresql+psycopg2://common@bink-uksouth-staging-common@127.0.0.1:5432/polaris
        - name: TEAMS_WEBHOOK
          value: https://hellobink.webhook.office.com/webhookb2/bf220ac8-d509-474f-a568-148982784d19@a6e2367a-92ea-4e5a-b565-723830bcc095/IncomingWebhook/bb308487c2844f26ae59a707bbdd382e/de80162c-8e52-466b-affd-f3ccc0a66d5d
        - name: VAULT_URL
          value: https://bink-uksouth-staging-com.vault.azure.net/
