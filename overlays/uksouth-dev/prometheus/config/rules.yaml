---
groups:
  - name: Replicas
    rules:
      - alert: Deployment Down
        expr: sum by(deployment, namespace) (kube_deployment_spec_replicas) == 0
          == 0
        for: 1m
        annotations:
          title: 'Dev - {{ $labels.deployment}}'
          description: 'Deployment: {{ $labels.deployment}} in Namespace: {{$labels.namespace}} has been scaled down.'


  - name: Restarts
    rules:
      - alert: Container Restarts
        expr: sum(rate(kube_pod_container_status_restarts_total[1m]) * 60) by (container, pod, namespace) > 0
        for: 1s
        annotations:
          title: 'Dev - Container restarts'
          description: 'Container: {{$labels.container}} in Deploy: {{$labels.pod}} in Namespace: {{$labels.namespace}} is restarting alot'