---
groups:
  - name: Replicas
    rules:
      - alert: Deployment Down
        expr: sum by(deployment, namespace) (kube_deployment_spec_replicas) == 0
          == 0
        for: 1m
        annotations:
          title: '{{ $labels.deployment}}'
          description: '{{ $labels.deployment}} in the {{$labels.namespace}} namespace has been scaled down.'


  - name: Restarts
    rules:
      - alert: Container Restarts
        expr: sum(rate(kube_pod_container_status_restarts_total[1m]) * 60) by (container, namespace) > 0
        for: 1s
        annotations:
          title: '{{$labels.container}}'
          description: '{{$labels.container}} in the {{$labels.namespace}} namespace has been restarting alot.'