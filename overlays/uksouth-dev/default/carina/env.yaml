apiVersion: apps/v1
kind: Deployment
metadata:
  name: carina
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: SQLALCHEMY_DATABASE_URI
          valueFrom:
            secretKeyRef:
              name: azure-pgfs
              key: common_carina_async
        - name: KEY_VAULT_URI
          value: https://bink-uksouth-dev-com.vault.azure.net/
        - name: SENTRY_DSN
          value: https://796961dceffa4a319ecdec6f80b5036c@o503751.ingest.sentry.io/5839508
        - name: SENTRY_ENV
          value: dev
        - name: REDIS_URL
          value: redis://redis:6379/0
        - name: BLOB_STORAGE_DSN
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        - name: BLOB_IMPORT_CONTAINER
          value: carina-imports
        - name: BLOB_ARCHIVE_CONTAINER
          value: carina-archive
        - name: BLOB_ERROR_CONTAINER
          value: carina-errors
        - name: BLOB_IMPORT_SCHEDULE
          value: "*/1 * * * *"
        - name: BLOB_CLIENT_LEASE_SECONDS
          value: "60"
