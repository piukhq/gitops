apiVersion: apps/v1
kind: Deployment
metadata:
  name: hermes
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: HERMES_BLOB_STORAGE_DSN
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        - name: HERMES_BLOB_STORAGE_CONTAINER
          value: media/hermes
        - name: HERMES_CUSTOM_DOMAIN
          value: https://api.dev.gb.bink.com
        - name: NO_AZURE_STORAGE
          value: 'False'
        - name: HERMES_DATABASE_NAME
          value: hermes
        - name: HERMES_DATABASE_USER
          valueFrom:
            secretKeyRef:
              key: admin_user
              name: azure-pg-common
        - name: HERMES_DATABASE_HOST
          value: 127.0.0.1
        - name: HERMES_DATABASE_PORT
          value: '5432'
        - name: ENVIRONMENT_NAME
          value: Development Environment
        - name: ENVIRONMENT_COLOR
          value: '#008000'
        - name: MIDAS_URL
          value: http://midas-api
        - name: LETHE_URL
          value: https://api.dev.gb.bink.com/password
        - name: HADES_URL
          value: http://hades-api
        - name: METIS_URL
          value: http://metis-api
        - name: HERMES_SENTRY_DSN
          value: https://40ec46dd6a8940c4882501427e3e3a66@o503751.ingest.sentry.io/5589266
        - name: HERMES_SENTRY_ENV
          value: dev
        - name: HERMES_SENTRY_ENVIRONMENT
          value: dev
        - name: HERMES_DEBUG
          value: 'true'
        - name: USE_INFLUXDB
          value: 'False'
        - name: INFLUX_HOST
          value: dev-influxdb-influxdb
        - name: REDIS_URL
          value: redis://redis:6379/0
        - name: CELERY_BROKER_URL
          value: pyamqp://guest:guest@rabbitmq:5672/
        - name: ATLAS_URL
          value: http://atlas-api
        - name: POOL_EXECUTOR_MAX_WORKERS
          value: '2'
        - name: VAULT_URL
          value: http://fakicorp:8200
        - name: APPLE_CLIENT_SECRET
          valueFrom:
            secretKeyRef:
              key: key
              name: sign-in-with-apple
        - name: SPREEDLY_BASE_URL
          value: http://pelops-api/spreedly
        - name: DEFAULT_API_VERSION
          value: '1.1'
        - name: SECURE_COOKIES
          value: "True"
