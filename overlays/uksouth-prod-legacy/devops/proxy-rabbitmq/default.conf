server {
    listen 80;
    location / {
        access_log off;
        return 302 $scheme://$http_host/amqp0/;
    }
    location /amqp0/ {
        access_log off;
        proxy_pass https://amqp0.prod.uksouth.bink.host:15671/;
    }
    location ~* /amqp0/api/(exchanges|queues)/(.*) {
        access_log off;
        proxy_pass https://amqp0.prod.uksouth.bink.host:15671/api/$1/%2F/$2?$query_string;
    }
    location /amqp1/ {
        access_log off;
        proxy_pass https://amqp1.prod.uksouth.bink.host:15671/;
    }
    location ~* /amqp1/api/(exchanges|queues)/(.*) {
        access_log off;
        proxy_pass https://amqp1.prod.uksouth.bink.host:15671/api/$1/%2F/$2?$query_string;
    }
    location /amqp2/ {
        access_log off;
        proxy_pass https://amqp2.prod.uksouth.bink.host:15671/;
    }
    location ~* /amqp2/api/(exchanges|queues)/(.*) {
        access_log off;
        proxy_pass https://amqp2.prod.uksouth.bink.host:15671/api/$1/%2F/$2?$query_string;
    }
}
