apiVersion: apps/v1
kind: Deployment
metadata:
  name: blobfile-exporter
  namespace: monitoring
spec:
  template:
    spec:
      containers:
      - name: blobfile-exporter
        image: binkcore.azurecr.io/blobfile-exporter:develop-388d6464
        ports:
        - containerPort: 9100
        env:
        - name: STORAGE_ACCOUNT_CONNECTION_STRING
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        resources:
          limits:
            memory: 128Mi
          requests:
            cpu: 150m
            memory: 128Mi
      dnsPolicy: ClusterFirst
      imagePullSecrets:
      - name: binkcore.azurecr.io
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext: {}
      terminationGracePeriodSeconds: 30