apiVersion: apps/v1
kind: Deployment
metadata:
  name: harmonia
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: TXM_DEBUG
          value: "false"
        - name: TXM_HERMES_URL
          value: http://hermes-api
        - name: TXM_EUROPA_URL
          value: http://europa-api/config_service
        - name: TXM_ATLAS_URL
          value: http://atlas-api/audit
        - name: TXM_SIMULATE_EXPORTS
          value: "false"
        - name: TXM_SENTRY_DSN
          value: https://39134637f8aa4bd190c23db0b23f6413@o503751.ingest.sentry.io/5609964
        - name: TXM_SENTRY_ENV
          value: prod
        - name: TXM_USE_BLOB_STORAGE
          value: "true"
        - name: TXM_AMQP_DSN
          value: amqps://prod-rabbitmq.uksouth.bink.host:5671
        - name: TXM_VAULT_URL
          value: https://bink-uksouth-prod-com.vault.azure.net/
        - name: TXM_VAULT_TOKEN
          value: "123"
        - name: TXM_AAD_TENANT_ID
          value: a6e2367a-92ea-4e5a-b565-723830bcc095
        - name: TXM_BLOB_STORAGE_DSN
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        - name: TXM_REDIS_URL
          valueFrom:
            secretKeyRef:
              key: uri_ssl
              name: azure-redis-vnet
        - name: TXM_RABBITMQ_HOST # dummy record, not used
          value: dummy
        - name: TXM_RABBITMQ_PORT # dummy record, not used
          value: "1234"
        - name: TXM_RABBITMQ_USER # dummy record, not used
          value: dummy
        - name: TXM_RABBITMQ_PASS # dummy record, not used
          value: dummpy
        - name: TXM_POSTGRES_URI
          valueFrom:
            secretKeyRef:
              name: azure-pgfs
              key: common_harmonia
