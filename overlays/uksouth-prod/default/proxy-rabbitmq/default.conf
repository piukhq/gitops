server {
    listen 80;
    location / {
        access_log off;
        return 302 $scheme://$http_host/rabbitmq0/;
    }
    location /rabbitmq0/ {
        access_log off;
        proxy_pass https://prod-rabbitmq0.uksouth.bink.host:15671/;
    }
    location ~* /rabbitmq0/api/(exchanges|queues)/(.*) {
        access_log off;
        proxy_pass https://prod-rabbitmq0.uksouth.bink.host:15671/api/$1/%2F/$2?$query_string;
    }
    location /rabbitmq1/ {
        access_log off;
        proxy_pass https://prod-rabbitmq1.uksouth.bink.host:15671/;
    }
    location ~* /rabbitmq1/api/(exchanges|queues)/(.*) {
        access_log off;
        proxy_pass https://prod-rabbitmq1.uksouth.bink.host:15671/api/$1/%2F/$2?$query_string;
    }
    location /rabbitmq2/ {
        access_log off;
        proxy_pass https://prod-rabbitmq2.uksouth.bink.host:15671/;
    }
    location ~* /rabbitmq2/api/(exchanges|queues)/(.*) {
        access_log off;
        proxy_pass https://prod-rabbitmq2.uksouth.bink.host:15671/api/$1/%2F/$2?$query_string;
    }
}
