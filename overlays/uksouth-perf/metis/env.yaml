apiVersion: apps/v1
kind: Deployment
metadata:
  name: metis
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: HERMES_URL
          value: http://hermes-api
        - name: DEBUG
          value: 'True'
        - name: METIS_TESTING
          value: 'True'
        - name: METIS_PRE_PRODUCTION
          value: 'False'
        - name: SPREEDLY_SIGNING_SECRET
        - name: SPREEDLY_BASE_URL
          value: http://pelops-api/spreedly
        - name: STUBBED_VOP_URL
          value: http://pelops-api
        - name: REDIS_HOST
          valueFrom:
            secretKeyRef:
              key: host
              name: azure-redis-common
        - name: REDIS_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: azure-redis-common
        - name: REDIS_PASS
          valueFrom:
            secretKeyRef:
              key: password
              name: azure-redis-common
        - name: PONTUS_DATABASE
          value: pontus
        - name: PONTUS_USER
          valueFrom:
            secretKeyRef:
              name: azure-pg-common
              key: admin_user
        - name: PONTUS_HOST
          value: 127.0.0.1
        - name: PONTUS_PORT
          valueFrom:
            secretKeyRef:
              name: azure-pg-common
              key: port
        - name: RABBITMQ_HOST
          value: rabbitmq
        - name: RABBITMQ_USER
          value: guest
        - name: RABBITMQ_PASS
          value: guest
