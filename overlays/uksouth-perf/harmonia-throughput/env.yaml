apiVersion: apps/v1
kind: Deployment
metadata:
  name: harmonia
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: TXM_BLOB_STORAGE_DSN
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        - name: TXM_REDIS_PASS
          valueFrom:
            secretKeyRef:
              key: password
              name: azure-redis-common
        - name: TXM_REDIS_HOST
          valueFrom:
            secretKeyRef:
              key: host
              name: azure-redis-common
        - name: TXM_POSTGRES_USER
          valueFrom:
            secretKeyRef:
              key: admin_user
              name: azure-pg-common
        - name: TXM_POSTGRES_PASS
          valueFrom:
            secretKeyRef:
              key: password
              name: azure-pg-common
        - name: TXM_POSTGRES_HOST
          valueFrom:
            secretKeyRef:
              key: host
              name: azure-pg-common
        - name: TXM_DEBUG
          value: "true"
        - name: TXM_POSTGRES_DB
          value: harmonia
        - name: TXM_HERMES_URL
          value: http://hermes-pcui-endpoint-mock-api/pcui-mock
        - name: TXM_EUROPA_URL
          value: http://europa-api/config_service
        - name: TXM_ATLAS_URL
          value: http://atlas-api/audit
        - name: TXM_HERMES_SLUG_FORMAT_STRING
          value: '{}-mock'
        - name: TXM_REDIS_DB
          value: '0'
        - name: TXM_SENTRY_DSN
          value: https://39134637f8aa4bd190c23db0b23f6413@sentry-relay.monitoring/5609964
        - name: TXM_SENTRY_ENV
          value: performance
        - name: TXM_RABBITMQ_HOST
          value: rabbitmq
        - name: TXM_RABBITMQ_PORT
          value: "5672"
        - name: TXM_RABBITMQ_USER
          value: guest
        - name: TXM_RABBITMQ_PASS
          value: guest
        - name: TXM_VAULT_URL
          value: http://fakicorp:8200
        - name: TXM_VAULT_TOKEN
          value: lalalagarbage
        - name: TXM_SIMULATE_EXPORTS
          value: 'true'
        - name: TXM_AAD_TENANT_ID
          value: a6e2367a-92ea-4e5a-b565-723830bcc095
