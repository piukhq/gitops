apiVersion: apps/v1
kind: Deployment
metadata:
  name: hermes
spec:
  template:
    spec:
      containers:
      - name: app
        env:
        - name: HERMES_BLOB_STORAGE_DSN
          valueFrom:
            secretKeyRef:
              key: connection_string
              name: azure-storage-common
        - name: HERMES_BLOB_STORAGE_CONTAINER
          value: media/hermes
        - name: NO_AZURE_STORAGE
          value: 'False'
        - name: HERMES_DATABASE_NAME
          value: hermes
        - name: HERMES_DATABASE_USER
          valueFrom:
            secretKeyRef:
              name: azure-pg-common
              key: admin_user
        - name: HERMES_DATABASE_HOST
          value: 127.0.0.1
        - name: HERMES_DATABASE_PORT
          valueFrom:
            secretKeyRef:
              name: azure-pg-common
              key: port
        - name: ENVIRONMENT_NAME
          value: Performance Sandbox Environment
        - name: ENVIRONMENT_COLOR
          value: '#FAC40F'
        - name: MIDAS_URL
          value: http://midas-api
        - name: LETHE_URL
          value: https://performance.sandbox.gb.bink.com/password
        - name: METIS_URL
          value: http://metis-api
        - name: HADES_URL
          value: http://hades-api
        - name: HERMES_SENTRY_DSN
          value: http://40ec46dd6a8940c4882501427e3e3a66@sentry-relay.monitoring/5589266
        - name: HERMES_SENTRY_ENV
          value: performance
        - name: SENTRY_SAMPLE_RATE
          value: '0.5'
        - name: REDIS_HOST
          valueFrom:
            secretKeyRef:
              key: host
              name: azure-redis-common
        - name: REDIS_PORT
          valueFrom:
            secretKeyRef:
              key: port
              name: azure-redis-common
        - name: REDIS_PASSWORD
          valueFrom:
            secretKeyRef:
              key: password
              name: azure-redis-common
        - name: CELERY_BROKER_URL
          value: amqps://perf-rabbitmq.uksouth.bink.host:5671
        - name: ATLAS_URL
          value: http://atlas-api
        - name: VAULT_URL
          value: http://fakicorp:8200
        - name: VAULT_TOKEN
          value: abc123
        - name: SPREEDLY_BASE_URL
          value: http://pelops-api/spreedly
        - name: DEFAULT_API_VERSION
          value: '1.1'
        - name: HERMES_DEBUG
          value: 'True'
        - name: QUERY_LOG_LEVEL
          value: CRITICAL
        - name: SECURE_COOKIES
          value: "True"
        - name: THREAD_POOL_EXECUTOR_MAX_WORKERS
          value: "5"
        - name: JEFF_URL
          value: http://127.0.0.1:8080
        - name: OIDC_RP_REPLY_URL
          value: https://performance.sandbox.gb.bink.com/admin/oidc/callback/
        - name: OIDC_CLIENT_ID
          value: 1a5d83f3-da1f-401c-ac5f-d41c3fa0d9ef
        - name: OIDC_CLIENT_SECRET
          value: -NGSjpWWx_1w-6~.NkIl3lf~DC3Rg-.CMz
